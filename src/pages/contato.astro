---
/**
 * src/pages/contato.astro — Contato com feed do Instagram ao vivo (Elfsight ou Common Ninja) + mapa full.
 * - Cole o ID do seu widget em UMA das integrações abaixo.
 * - O card do mapa usa flex para ocupar 100% da altura disponível do card (sem espaço vazio).
 */

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const insta = 'espaco_origens'; 

const meta = {
  title: 'contato - espaço origens',
  description: 'Fale com o ateliê: Instagram, WhatsApp, e-mail e localização em Niterói.',
  siteUrl: 'https://lucas-kiozy.github.io/espaco-origens-site',
};

// JSON-LD
const contactLd = {
  '@context': 'https://schema.org',
  '@type': 'ContactPage',
  name: 'Contato — Espaço Origens',
  url: `${meta.siteUrl}/contato`,
  sameAs: [
    `https://instagram.com/${insta}`,
    'https://wa.me/5521981869391',
    'mailto:contato.espaco.origens@gmail.com'
  ],
};

// ====== INTEGRAÇÃO DO FEED (escolha UMA) ======
// 1) ELFSIGHT — pegue o ID no painel (ex.: 0a1b2c3d-...)
//    Troque null pelo ID ou deixe null para esconder.
const ELFSIGHT_APP_ID = '8c22909a37ec40fd8ca952724a4500de'; // 'ELFSIGHT_APP_ID_AQUI';
---

<Layout title={meta.title} description={meta.description}>
  <script type="application/ld+json" set:html={JSON.stringify(contactLd)} />

  <Header />

  <!-- HERO -->
  <section class="max-w-6xl mx-auto px-4 pt-14 pb-8">
    <h1 class="text-4xl md:text-5xl leading-tight lowercase text-marrom">
      fale com a gente
    </h1>
    <p class="mt-4 text-md text-marrom/80 max-w-prose">
      dúvidas, encomendas ou só trocar uma ideia sobre processos e materiais — estamos por aqui.
    </p>
  </section>

  <!-- divisor -->
  <div class="max-w-6xl mx-auto px-4">
    <div class="h-[8px] rounded-full bg-gradient-to-r from-terracota via-coral to-verde-vivo"></div>
  </div>

  <!-- GRID principal -->
  <section class="max-w-6xl mx-auto px-4 py-10 grid md:grid-cols-12 gap-6">
    <!-- Instagram -->
    <article class="md:col-span-7 rounded-2xl border border-areia/70 bg-areia/40 p-5">
      <h2 class="text-2xl lowercase text-marrom">siga nosso trabalho no instagram</h2>
      <p class="text-marrom/80 mt-2">bastidores do ateliê, processos e peças finalizadas.</p>

      <!-- ELFSIGHT (ativa se houver ID) -->
      {ELFSIGHT_APP_ID && (
        <>
          <script src="https://static.elfsight.com/platform/platform.js" data-use-service-core defer></script>
          <div class={`elfsight-app-${ELFSIGHT_APP_ID} mt-4` } data-elfsight-app-lazy></div>
        </>
      )}

      <!-- Fallback visual (aparece só se nenhum widget estiver configurado) -->
      {(!ELFSIGHT_APP_ID) && (
        <div class="mt-4">
          <div class="grid grid-cols-3 gap-2">
            <div class="aspect-square rounded-xl bg-gradient-to-br from-terracota/80 to-coral/80"></div>
            <div class="aspect-square rounded-xl bg-gradient-to-br from-azul-pedra/80 to-bronze/70"></div>
            <div class="aspect-square rounded-xl bg-gradient-to-br from-verde-vivo/80 to-areia/80"></div>
            <div class="aspect-square rounded-xl bg-gradient-to-br from-coral/80 to-terracota/80"></div>
            <div class="aspect-square rounded-xl bg-gradient-to-br from-bronze/80 to-creme/80"></div>
            <div class="aspect-square rounded-xl bg-gradient-to-br from-azul-pedra/80 to-ouro-escuro/70"></div>
          </div>
          <a
            href={`https://instagram.com/${insta}`} target="_blank" rel="noopener"
            class="btn-primary inline-flex items-center gap-2 mt-4"
          >
            <svg viewBox="0 0 24 24" class="w-5 h-5" aria-hidden="true">
              <path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11zm0 2a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7zM18 6.8a1 1 0 1 1 0 2.001a1 1 0 0 1 0-2z"/>
            </svg>
            ver @{insta}
          </a>
        </div>
      )}
    </article>

    <!-- Mapa (lado direito no desktop) -->
    <article class="md:col-span-5 rounded-2xl border border-areia/70 bg-creme p-0 overflow-hidden flex flex-col">
      <div class="p-5 pb-0">
        <h2 class="text-2xl lowercase text-marrom">onde nos encontrar</h2>
        <p class="text-marrom/80 mt-2">niterói - rj · cep 24110-050</p>
      </div>
      <!-- ocupa todo o restante do card -->
      <div class="relative flex-1 min-h-[320px]">
        <iframe
          title="mapa — cep 24110-050"
          class="absolute inset-0 w-full h-full block"
          style="border:0"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps?q=CEP+24110-050&hl=pt-BR&z=12&output=embed">
        </iframe>
      </div>
    </article>
  </section>

  <!-- contatos diretos -->
  <section class="max-w-6xl mx-auto px-4 pb-12">
    <div class="grid sm:grid-cols-2 gap-6">
      <!-- WhatsApp -->
      <a
        href="https://wa.me/5521981869391" target="_blank" rel="noopener"
        class="rounded-2xl border border-areia/70 bg-areia/40 p-5 hover:bg-areia/60 transition"
      >
        <div class="flex items-center gap-3">
          <svg viewBox="0 0 24 24" class="w-6 h-6 text-terracota" aria-hidden="true">
            <path fill="currentColor" d="M20.52 3.48A11.87 11.87 0 0 0 12.07.5C5.78.5.73 5.55.73 11.84c0 2.05.53 4.04 1.54 5.82L.5 23.5l6.03-1.73a11.3 11.3 0 0 0 5.54 1.49h.01c6.29 0 11.34-5.05 11.34-11.34a11.25 11.25 0 0 0-3.9-8.44M12.08 21.2h-.01a9.43 9.43 0 0 1-4.81-1.33l-.34-.2l-3.58 1.03l1.03-3.49l-.22-.36a9.44 9.44 0 0 1-1.45-5.03c0-5.22 4.25-9.47 9.48-9.47c2.53 0 4.91.98 6.7 2.76a9.4 9.4 0 0 1 2.78 6.7c0 5.23-4.26 9.49-9.48 9.49m5.46-7.1c-.3-.15-1.78-.88-2.05-.98c-.27-.1-.47-.15-.67.15c-.2.29-.77.98-.95 1.18c-.18.2-.35.22-.65.07c-.3-.15-1.25-.46-2.38-1.46c-.88-.78-1.47-1.73-1.64-2.02c-.17-.29-.02-.45.13-.6c.14-.14.3-.35.45-.52c.15-.17.2-.29.3-.48c.1-.2.05-.37-.02-.52c-.07-.15-.67-1.61-.92-2.2c-.24-.58-.49-.5-.67-.51h-.57c-.2 0-.52.07-.79.37c-.27.3-1.04 1.02-1.04 2.48c0 1.46 1.07 2.88 1.22 3.08c.15.2 2.1 3.2 5.07 4.49c.71.31 1.27.5 1.7.64c.72.23 1.38.2 1.9.12c.58-.09 1.78-.73 2.03-1.43c.25-.7.25-1.3.17-1.43c-.08-.13-.27-.2-.57-.35"/>
          </svg>
          <div>
            <p class="text-marrom font-medium lowercase">whatsapp</p>
            <p class="text-marrom/70 text-sm">fale agora com a gente</p>
          </div>
        </div>
      </a>

      <!-- E-mail -->
      <a
        href="mailto:contato.espaco.origens@gmail.com" target="_blank" rel="noopener"
        class="rounded-2xl border border-areia/70 bg-creme p-5 hover:bg-areia/40 transition"
      >
        <div class="flex items-center gap-3">
          <svg viewBox="0 0 24 24" class="w-6 h-6 text-terracota" aria-hidden="true">
            <path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 2v.01L12 11L4 6.01V6zM4 18V8l8 5l8-5v10z"/>
          </svg>
          <div>
            <p class="text-marrom font-medium lowercase">e-mail</p>
            <p class="text-marrom/70 text-sm">contato.espaco.origens@gmail.com</p>
          </div>
        </div>
      </a>
    </div>
  </section>

  <Footer />
</Layout>
