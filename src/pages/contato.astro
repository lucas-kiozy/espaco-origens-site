---
/**
 * src/pages/contato.astro — Página de contato (v2)
 * Alterações pedidas:
 * - Mapa ocupa no MÁXIMO metade da tela e fica à direita em telas grandes.
 * - Instagram e WhatsApp ficam próximos (mesma coluna à esquerda).
 * - Card de e‑mail menor e com endereço contato.espaco.origens@gmail.com.
 * Mantém hero/divisores/paleta iguais às outras páginas + SEO (ContactPage).
 */

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Button from '../components/ui/Button.astro';

const meta = {
  title: 'contato - espaço origens',
  description:
    'fale com o espaço origens — acompanhe nosso trabalho no instagram, veja onde nos encontrar e entre em contato por whatsapp ou e‑mail.',
  siteUrl: 'https://espacoorigens.com.br',
};

// Ajuste seus dados aqui
const instagramUser = 'espaco.origens';          // ex.: 'espaco.origens'
const instagramPosts: string[] = [];            // opcional: URLs de posts p/ embed
const whatsappNumber = '5521981869391';         // só dígitos com DDI + DDD

// JSON‑LD para SEO
const contactLd = {
  '@context': 'https://schema.org',
  '@type': 'ContactPage',
  name: 'contato - espaço origens',
  url: `${meta.siteUrl}/contato`,
  isPartOf: { '@type': 'WebSite', name: 'espaço origens', url: meta.siteUrl },
  description: meta.description,
  sameAs: [`https://www.instagram.com/${instagramUser}/`],
};
---

<Layout title={meta.title} description={meta.description}>
  <script type="application/ld+json" set:html={JSON.stringify(contactLd)} />

  <Header />

  <!-- HERO -->
  <section class="max-w-6xl mx-auto px-4 pt-14 pb-8">
    <h1 class="text-4xl md:text-5xl leading-tight lowercase text-marrom">vamos conversar?</h1>
    <p class="mt-4 text-md text-marrom/80 max-w-prose">
      siga nosso trabalho, veja onde nos encontrar e escolha a melhor forma de falar com a gente.
    </p>
  </section>

  <!-- divisor paleta -->
  <div class="max-w-6xl mx-auto px-4">
    <div class="h-[8px] rounded-full bg-gradient-to-r from-terracota via-coral to-verde-vivo"></div>
  </div>

  <!-- GRID PRINCIPAL: esquerda (instagram + whatsapp) | direita (mapa) -->
  <section class="max-w-6xl mx-auto px-4 py-10">
    <div class="grid lg:grid-cols-12 gap-6">
      <!-- COLUNA ESQUERDA: Instagram + WhatsApp -->
      <div class="lg:col-span-7 space-y-6">
        <!-- Instagram: posts embutidos OU CTA para o perfil -->
        <div>
          <h2 class="text-2xl lowercase text-marrom mb-4">siga nosso trabalho</h2>

          {instagramPosts.length > 0 ? (
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              {instagramPosts.map((url) => {
                const match = url.match(/instagram\.com\/p\/([^\/]+)/i);
                const code = match ? match[1] : null;
                return (
                  <div class="rounded-2xl overflow-hidden border border-areia/70 bg-creme">
                    {code ? (
                      <iframe
                        src={`https://www.instagram.com/p/${code}/embed`}
                        class="w-full aspect-square"
                        loading="lazy"
                        title="post do instagram"
                        referrerpolicy="strict-origin-when-cross-origin"
                      ></iframe>
                    ) : (
                      <a href={`https://www.instagram.com/${instagramUser}/`} target="_blank" rel="noopener" class="block p-6 text-center">
                        <p class="text-marrom">post indisponível — ver perfil</p>
                      </a>
                    )}
                  </div>
                );
              })}
            </div>
          ) : (
            <div class="rounded-2xl border border-areia/70 bg-areia/40 p-6 flex items-start justify-between gap-4">
            <div>
                <h3 class="text-lg lowercase text-marrom mb-2">instagram</h3>
                <p class="text-marrom/80">
                 estamos sempre publicando processos, bastidores e peças novas.
                </p>
            </div>
            <Button href={`https://www.instagram.com/${instagramUser}/`} target="_blank" variant="primary">conferir</Button>
            </div>
          )}
        </div>

        <!-- WhatsApp: card próximo do Instagram -->
        <div class="rounded-2xl border border-areia/70 bg-areia/40 p-6 flex items-start justify-between gap-4">
          <div>
            <h3 class="text-lg lowercase text-marrom mb-2">whatsapp</h3>
            <p class="text-marrom/80">
              dúvidas rápidas e encomendas personalisadas - por aqui a resposta costuma ser mais rápida.
            </p>
          </div>
          <Button href={`https://wa.me/${whatsappNumber}`} variant="primary" target="_blank" class="shrink-0">abrir</Button>
        </div>

        <!-- E‑mail: card menor -->
        <div class="rounded-2xl border border-areia/70 bg-creme p-5 w-full max-w-sm">
          <h3 class="text-lg lowercase text-marrom mb-1">e‑mail</h3>
          <p class="text-marrom/80 text-sm mb-3">para propostas e orçamentos detalhados.</p>
          <Button href="mailto:contato.espaco.origens@gmail.com" variant="outline">nos mande um email</Button>
        </div>
      </div>

      <!-- COLUNA DIREITA: Mapa (no máx. metade da tela) -->
      <div class="lg:col-span-5">
        <h2 class="text-2xl lowercase text-marrom mb-4">onde nos encontrar</h2>
        <div class="rounded-2xl overflow-hidden border border-areia/70 bg-creme">
            <!-- Wrapper com altura controlada -->
            <div class="w-full" style="max-height:35vh; min-height:260px; height:32vh;">
            <iframe
                class="w-full h-full"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                src="https://www.google.com/maps?q=24110-050&z=14&output=embed"
                title="mapa — CEP 24110-050"
            ></iframe>
            </div>
        </div>
      </div>
    </div>
  </section>

  <Footer />
</Layout>
