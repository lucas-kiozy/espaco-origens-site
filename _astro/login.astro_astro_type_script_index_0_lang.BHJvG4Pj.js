const h="modulepreload",_=function(f){return"/espaco-origens-site/"+f},g={},v=function(p,c,i){let u=Promise.resolve();if(c&&c.length>0){let r=function(n){return Promise.all(n.map(a=>Promise.resolve(a).then(s=>({status:"fulfilled",value:s}),s=>({status:"rejected",reason:s}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=e?.nonce||e?.getAttribute("nonce");u=r(c.map(n=>{if(n=_(n),n in g)return;g[n]=!0;const a=n.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":h,a||(o.as="script"),o.crossOrigin="",o.href=n,t&&o.setAttribute("nonce",t),document.head.appendChild(o),a)return new Promise((l,d)=>{o.addEventListener("load",l),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})}))}function m(r){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=r,window.dispatchEvent(e),!e.defaultPrevented)throw r}return u.then(r=>{for(const e of r||[])e.status==="rejected"&&m(e.reason);return p().catch(m)})},w={ASSETS_PREFIX:void 0,BASE_URL:"/espaco-origens-site/",DEV:!1,MODE:"production",PROD:!0,PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwamljbHpiYnF1b3VscnlramdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MzU0NTUsImV4cCI6MjA3MjQxMTQ1NX0.LQaKmPZa9Ywq_W9RS729ePk-BdUiFh_WPzOvw_J94fE",PUBLIC_SUPABASE_URL:"https://cpjiclzbbquoulrykjgi.supabase.co",SITE:"https://lucas-kiozy.github.io/espaco-origens-site",SSR:!1};(function(){const f=document.getElementById("loginForm"),p=document.getElementById("feedback"),c=window.location.search.includes("signup=true");if(c){const r=document.querySelector("h1"),e=document.querySelector('button[type="submit"]'),t=document.querySelector(".recover-link");r&&(r.textContent="criar conta"),e&&(e.textContent="criar conta"),t&&(t.textContent="já tem conta? entrar")}function i(r){p&&(p.textContent=r||"")}function u(r,e){const t=String(e&&(e.message||e.error_description)||e||"").toLowerCase();return t.includes("already")&&(t.includes("exist")||t.includes("registered"))||t.includes("duplicate")||t.includes("user already registered")?"usuário já existe. faça login ou recupere a senha":t.includes("invalid login credentials")?"email ou senha incorretos":t.includes("invalid email")?"email inválido. verifique e tente novamente":t.includes("password should be at least")||t.includes("at least")?"a senha deve ter pelo menos 6 caracteres":t.includes("not confirmed")?"confirme seu email antes de entrar":t.includes("over_email_send_rate_limit")||t.includes("rate limit")?"muitas tentativas. aguarde alguns minutos":r==="signup"?"erro ao criar conta. tente novamente":r==="signin"?"erro ao fazer login. tente novamente":"ocorreu um erro. tente novamente"}f?.addEventListener("submit",async r=>{r.preventDefault();const e=document.getElementById("email"),t=document.getElementById("password"),n=(e&&e.value?e.value:"").trim(),a=t&&t.value||"";if(!n||!a||a.length<6)return i("verifique seu email e senha (mín. 6 caracteres)");try{i(c?"criando conta...":"entrando...");const s=await v(()=>import("./auth.D2BjkCcG.js"),[]);if(c){const o=await s.signUp(n,a);if(o&&o.error)return i(u("signup",o.error));try{const l=await s.resendSignup(n);if(l&&l.error){const d=String(l.error.message||l.error.error_description||"").toLowerCase();return d.includes("already confirmed")||d.includes("already_confirmed")||d.includes("already-confirmed")?i("usuário já existe. faça login ou recupere a senha"):d.includes("rate limit")?i("muitas tentativas. aguarde alguns minutos"):i("erro ao criar conta. tente novamente")}i("conta criada! verifique seu email para confirmar.")}catch{i("erro ao criar conta. tente novamente")}}else try{await s.signIn(n,a),i("bem-vindo! redirecionando…"),localStorage.setItem("justLoggedIn","1");const o=import.meta&&w&&"/espaco-origens-site/"||"/";setTimeout(()=>{window.location.href=o},1e3)}catch(o){return i(u("signin",o))}}catch(s){i(u(c?"signup":"signin",s))}});const m=document.querySelectorAll(".recover-link");m[0]?.addEventListener("click",r=>{r.preventDefault(),c?window.location.href=window.location.pathname:window.location.href=window.location.pathname+"?signup=true"}),m[1]?.addEventListener("click",async r=>{r.preventDefault();const e=document.getElementById("email"),t=(e&&e.value?e.value:"").trim();if(!t)return i("digite seu email primeiro");try{i("enviando email de recuperação...");const{resetPassword:n}=await v(async()=>{const{resetPassword:a}=await import("./auth.D2BjkCcG.js");return{resetPassword:a}},[]);await n(t),i("email de recuperação enviado!")}catch(n){String(n&&(n.message||n.error_description)||"").toLowerCase().includes("rate limit")?i("muitas tentativas. aguarde alguns minutos"):i("erro ao enviar email de recuperação")}})})();export{v as _};
