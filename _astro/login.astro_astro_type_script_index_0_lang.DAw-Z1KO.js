const h="modulepreload",_=function(m){return"/espaco-origens-site/"+m},g={},v=function(f,c,o){let u=Promise.resolve();if(c&&c.length>0){let n=function(i){return Promise.all(i.map(r=>Promise.resolve(r).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),t=e?.nonce||e?.getAttribute("nonce");u=n(c.map(i=>{if(i=_(i),i in g)return;g[i]=!0;const r=i.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":h,r||(s.as="script"),s.crossOrigin="",s.href=i,t&&s.setAttribute("nonce",t),document.head.appendChild(s),r)return new Promise((a,p)=>{s.addEventListener("load",a),s.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(n){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=n,window.dispatchEvent(e),!e.defaultPrevented)throw n}return u.then(n=>{for(const e of n||[])e.status==="rejected"&&d(e.reason);return f().catch(d)})},w={ASSETS_PREFIX:void 0,BASE_URL:"/espaco-origens-site/",DEV:!1,MODE:"production",PROD:!0,PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwamljbHpiYnF1b3VscnlramdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4MzU0NTUsImV4cCI6MjA3MjQxMTQ1NX0.LQaKmPZa9Ywq_W9RS729ePk-BdUiFh_WPzOvw_J94fE",PUBLIC_SUPABASE_URL:"https://cpjiclzbbquoulrykjgi.supabase.co",SITE:"https://lucas-kiozy.github.io/espaco-origens-site",SSR:!1};(function(){const m=document.getElementById("loginForm"),f=document.getElementById("feedback"),c=window.location.search.includes("signup=true");if(c){const n=document.querySelector("h1"),e=document.querySelector('button[type="submit"]'),t=document.querySelector(".recover-link");n&&(n.textContent="criar conta"),e&&(e.textContent="criar conta"),t&&(t.textContent="já tem conta? entrar")}function o(n){f&&(f.textContent=n||"")}function u(n,e){const t=String(e&&(e.message||e.error_description)||e||"").toLowerCase();return t.includes("already")&&(t.includes("exist")||t.includes("registered"))||t.includes("duplicate")?"usuário já existe. faça login ou recupere a senha":t.includes("invalid login credentials")?"email ou senha incorretos":t.includes("invalid email")?"email inválido. verifique e tente novamente":t.includes("password should be at least")||t.includes("at least")?"a senha deve ter pelo menos 6 caracteres":t.includes("not confirmed")?"confirme seu email antes de entrar":t.includes("over_email_send_rate_limit")||t.includes("rate limit")?"muitas tentativas. aguarde alguns minutos":n==="signup"?"erro ao criar conta. tente novamente":n==="signin"?"erro ao fazer login. tente novamente":"ocorreu um erro. tente novamente"}m?.addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("email"),t=document.getElementById("password"),i=(e&&e.value?e.value:"").trim(),r=t&&t.value||"";if(!i||!r||r.length<6)return o("verifique seu email e senha (mín. 6 caracteres)");try{o(c?"criando conta...":"entrando...");const{signIn:l,signUp:s}=await v(async()=>{const{signIn:a,signUp:p}=await import("./auth.CUISKgNp.js");return{signIn:a,signUp:p}},[]);if(c){const a=await s(i,r);if(a&&a.error)return o(u("signup",a.error));o("conta criada! verifique seu email para confirmar.")}else try{await l(i,r),o("bem-vindo! redirecionando…"),localStorage.setItem("justLoggedIn","1");const a=import.meta&&w&&"/espaco-origens-site/"||"/";setTimeout(()=>{window.location.href=a},1e3)}catch(a){return o(u("signin",a))}}catch(l){o(u(c?"signup":"signin",l))}});const d=document.querySelectorAll(".recover-link");d[0]?.addEventListener("click",n=>{n.preventDefault(),c?window.location.href=window.location.pathname:window.location.href=window.location.pathname+"?signup=true"}),d[1]?.addEventListener("click",async n=>{n.preventDefault();const e=document.getElementById("email"),t=(e&&e.value?e.value:"").trim();if(!t)return o("digite seu email primeiro");try{o("enviando email de recuperação...");const{resetPassword:i}=await v(async()=>{const{resetPassword:r}=await import("./auth.CUISKgNp.js");return{resetPassword:r}},[]);await i(t),o("email de recuperação enviado!")}catch(i){String(i&&i.message||"").toLowerCase().includes("rate limit")?o("muitas tentativas. aguarde alguns minutos"):o("erro ao enviar email de recuperação")}})})();export{v as _};
