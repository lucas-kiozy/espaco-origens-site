const C="modulepreload",E=function(r){return"/espaco-origens-site/"+r},g={},p=function(i,n,c){let u=Promise.resolve();if(n&&n.length>0){let t=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),v=o?.nonce||o?.getAttribute("nonce");u=t(n.map(a=>{if(a=E(a),a in g)return;g[a]=!0;const d=a.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${m}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":C,d||(l.as="script"),l.crossOrigin="",l.href=a,v&&l.setAttribute("nonce",v),document.head.appendChild(l),d)return new Promise((x,h)=>{l.addEventListener("load",x),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(t){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=t,window.dispatchEvent(o),!o.defaultPrevented)throw t}return u.then(t=>{for(const o of t||[])o.status==="rejected"&&s(o.reason);return i().catch(s)})},y=document.getElementById("loginForm"),e=document.getElementById("feedback"),f=window.location.search.includes("signup=true");if(f){const r=document.querySelector("h1"),i=document.querySelector('button[type="submit"]'),n=document.querySelector(".recover-link");r&&(r.textContent="criar conta"),i&&(i.textContent="criar conta"),n&&(n.textContent="já tem conta? entrar")}y?.addEventListener("submit",async r=>{r.preventDefault();const i=document.getElementById("email"),n=document.getElementById("password");if(!(i instanceof HTMLInputElement)||!(n instanceof HTMLInputElement)){e&&(e.textContent="erro no formulário. tente novamente");return}const c=i.value.trim(),u=n.value;if(!c||!u||u.length<6){e&&(e.textContent="verifique seu email e senha (mín. 6 caracteres)");return}try{e&&(e.textContent=f?"criando conta...":"entrando...");const{signIn:s,signUp:t}=await p(async()=>{const{signIn:o,signUp:v}=await import("./auth.BDijdJJ4.js");return{signIn:o,signUp:v}},[]);f?(await t(c,u),e&&(e.textContent="conta criada! verifique seu email para confirmar.")):(await s(c,u),e&&(e.textContent="bem-vindo! redirecionando…"),setTimeout(()=>{window.location.href="/espaco-origens-site"},1e3))}catch(s){if(console.error("Auth error:",s),e){const t=s instanceof Error?s.message:String(s);f?t.includes("User already registered")||t.includes("user already exists")?e.textContent="usuário já existe. faça login ou recupere a senha":t.includes("Invalid email")?e.textContent="email inválido. verifique e tente novamente":t.includes("Password should be at least")||t.includes("password is too short")?e.textContent="a senha deve ter pelo menos 6 caracteres":t.includes("Error sending confirmation email")?e.textContent="erro ao enviar email de confirmação. tente novamente em alguns minutos":t.includes("rate limit")||t.includes("over_email_send_rate_limit")?e.textContent="muitas tentativas. aguarde alguns minutos":t.includes("unexpected_failure")?e.textContent="erro temporário. tente novamente em alguns minutos":e.textContent="erro ao criar conta. tente novamente":t.includes("Invalid login credentials")?e.textContent="email ou senha incorretos":t.includes("User not confirmed")?e.textContent="confirme seu email antes de entrar":t.includes("User already registered")?e.textContent="usuário já existe. faça login ou recupere a senha":t.includes("Error sending confirmation email")?e.textContent="erro ao enviar email de confirmação. tente novamente em alguns minutos":t.includes("rate limit")||t.includes("over_email_send_rate_limit")?e.textContent="muitas tentativas. aguarde alguns minutos":t.includes("unexpected_failure")?e.textContent="erro temporário. tente novamente em alguns minutos":e.textContent="erro ao fazer login. tente novamente"}}});const w=document.querySelectorAll(".recover-link");w[0]?.addEventListener("click",r=>{r.preventDefault(),f?window.location.href=window.location.pathname:window.location.href=window.location.pathname+"?signup=true"});w[1]?.addEventListener("click",async r=>{r.preventDefault();const i=document.getElementById("email")?.value;if(!i){e&&(e.textContent="digite seu email primeiro");return}try{e&&(e.textContent="enviando email de recuperação...");const{resetPassword:n}=await p(async()=>{const{resetPassword:c}=await import("./auth.BDijdJJ4.js");return{resetPassword:c}},[]);await n(i),e&&(e.textContent="email de recuperação enviado!")}catch(n){console.error("Reset password error:",n),e&&((n instanceof Error?n.message:String(n)).includes("rate limit")?e.textContent="muitas tentativas. aguarde alguns minutos":e.textContent="erro ao enviar email de recuperação")}});export{p as _};
